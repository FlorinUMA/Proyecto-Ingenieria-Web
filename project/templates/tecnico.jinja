{# Makes use of base.jinja #}
{% extends 'base.jinja' %}

{% block head %}
{# Adds the title, stylesheet links and favicon #}

<title>Robots</title>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script src="{{url_for('static',filename='js/changeReturn.js')}}"></script>

{% endblock %}

{%block navbar%}
<div class="collapse navbar-collapse" id="menuItems">
  <ul class="navbar-nav me-auto">
    <li class="nav-item">
      <a href="/tecnico/task-creator?user={{user}}" class="nav-link">Añadir nueva tarea</a>
    </li>
    <li class="nav-item">
      <a href="/tecnico/ver-tareas?user={{user}}" class="nav-link">Ver tareas</a>
    </li>
  </ul>
</div>
{% endblock %}

{% block route %}
  Home > Técnico
{% endblock %}

{% block content%}
<script>custom_return("{{user}}")</script>

<div class="container-fluid my-5 px-5">
    <h2 class="mini_title">Robots</h2>
          
    <table class="table table-dark table-hover mx-auto" style="width: 85%">
      <thead class="thead-dark">
        <tr>
          <th scope="col">ID Robot</th>
          <th scope="col">Nombre</th>
          <th scope="col">Tareas</th>
        </tr>
      </thead>
      <tbody>
            {% for i in row %}
              <tr onclick="refRobot('{{user}}', {{i.id}})">
                <td>{{i.id}}</td>
                <td>{{i.nombre}}</td>
                <td>{{i.id|buscaTareas(tareas)}}</td>
                {# <td><button OnClick="refRobot({{i.id}})">Edit</button></td> #}
              </tr>
            {% endfor %}
      </tbody>
    </table>
  </div>

{% endblock %}

{% block scripts%}

<script>
function refRobot(user, id) {
  location.href = `/tecnico/robotDetails?user=${user}&id=${id}`;
}
</script>

{% endblock %}